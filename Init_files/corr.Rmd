---
title: "Corrigé examen"
subtitle : "Introduction aux statistiques en géographie avec R"
author: "E. Marveaux & L. Laurian"
date: "04/09/2024"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```

**Durée : 1 heure**  
**Jusqu'à deux réponses correctes par question. Noircir le cercle devant la bonne réponse.**   
**L'accès au support https://huguespecout.github.io/Initiation_R_stats/ est autorisé.**   

\vspace{20pt} 

# Questions sur R (10 pts / 0.5 ou 1 pts par question)

## 1) Laquelle (Lesquelles) de ces affirmations est(sont) correcte(s) ? (0.5 pts)

O  R est un Environnement de Développement Intégré    
X  R est un langage et un logiciel   
X  Rstudio est un Environnement de Développement Intégré   
O  RStudio est un langage et un logiciel    

## 2) Qu’est-ce qu’un **package** R ? (0.5 pts)

O Une fonction   
X Une bibliothèque de fonctions   
O Une commande   
O Un répertoire de travail   

## 3) Quel(les) fonctionnalités(s) apportent l’utilisation d’un projet Rstudio ? (0.5 pts)

X Le répertoire de travail est prédéfini       
O Tous les packages utiles sont automatiquement chargés        
X L’échange et la portabilité de votre travail est facilité     
O La correction des erreurs de votre programme est automatique     

## 4) Quelle fonction permet d'avoir un aperçu d'un objet dans R ? (0.5 pts)

X `str()`   
O `dim()`   
O `class()`   
O `length()`   

## 5) Quelle(s) commande(s) permet(tent) de trier les valeurs de la variable "var" du data frame nommé "df" ? (1 pt)

O `order(df$var)`  
X `sort(df$var)`  
X `df[order(df$var), ]`  
O `df[sort(df$var), ]`  

## 6) Quelle fonction permet de joindre deux dataframes à l'aide d'un identifiant commun ? (1 pt)

O `cbind()`    
X `merge()`    
O `rbind()`    
O `aggregate()`    

## 7) Si on exécute ce code et que l’objet x est un nombre, quel mot s’affichera dans la console : (0.5 pts)

``` r
if (is.numeric(x)){
  print("YOUPI")
}else{
  print("WOW")
} 
```

X  "YOUPI"    
O  "WOW"    
O  ERROR    
O  NA


## 8) Un objet sf...(1pt)

X contient des coordonnées géographique     
O est composé de différents *levels*  
O est un ensemble de points     
X est un type spécifique de data frame  

## 9) La température est une variable... (0.5 pt)

O Quantitative discrète       
X Quantitative continue     
O Qualitative nominale      
O Qualitative ordinale  


## 10) Quelle(s) fonction(s) permet(tent) de calculer un tableau de contingence ? (1 pt)

X `table()`     
O `rprop()`    
O `levels()`    
O `prop.table()`  

## 11) Quelle fonction utiliser pour visualiser la distribution d'une variable quantitative ? (1 pt)

O `barplot()`  
X `hist()`  
O `summary()`  
O `cut()` 

## 12) Quelle fonction du package mapsf permet d'afficher une couche géographique ? (0.5 pts)

O `plot()`    
O `sf()`    
O `st_geometry()`    
X `mf_map()`    

## 13) Quelle(s) fonction(s) permet(tent) de calculer un coefficient de corrélation entre deux variables quantitatives ? (1 pt)

O `get.cor()`    
O `t.test()`    
O `lm()`    
X `cor.test()`    

## 14) Dans le cadre du calcul du Khi², laquelle de ces affirmation est fausse ? (0.5 pts)

O Les deux variables doivent être qualitatives  
O Le tableau de contingence doit avoir au moins 2 lignes et 2 colonnes    
X Le degré de liberté doit être supérieur à 5  
O Une p-value inférieure à 0.05 permet d'exclure l'hypothèse d'indépendance


\vspace{50pt}

# Questions de statistiques (10 pts)

\vspace{15pt}

## 15) Qu'est ce que la discrétisation ? Développez en donnant plusieurs exemples de méthodes de discrétisation (2pts)

**Réponse** : La discrétisation consiste en **découper** une variable quantitative en **classes**, auxquelles on va attribuer un nombre de valeurs. Elles permettent entre autre de transformer une variable quantitative en variable qualitative. La méthode de discrétisation employée va dépendre de la distribution de la variable d'intérêt : par exemple, on privilégiera une discrétisation par quantiles ou effectifs égaux pour une variable présentant une distribution dissymétrique et/ou bimodale, tandis qu'une discrétisation standardisée (autour de l'écart type) ou amplitudes égales correspond à une variable présentant une distribution symétrique.

\vspace{200pt}    


## 16)  Qualifiez cette forme de distribution. Quelles en sont les principales caractéristiques ? Que représente chaque axe ? Nommez les (3pts)

```{r, echo = FALSE}
x <- seq(0, 11, by = .01)
y <- dnorm(x, mean = 8, sd = 1)*100
plot(x,y, type = 'l', col = "red", lwd = 2)
lines(x = c(8,8), y = c(-2,40), lwd = 2)
```
  

**Réponse** : Cette distribution semble être dissymétrique à droite. Elle est **unimodale**, car on observe un pic à l'oeil nu. L'axe des ordonnées y représente la **fréquence**, tandis que l'axe des abcisses x représente l'**amplitude** de la distribution Par exemple, on observe que 40 individus possèdent la valeur 8 dans la variable x.

axe x : variable observée
axe y : fréquence ou effectif
  
  
\vspace{150pt} 


## 17) Quel test permet de vérifier l’existence d’une relation statistique entre deux variables qualitatives ? Quel indicateur permet de vérifier la significativité de ce test ?  (2pts)

**Réponse** : Le test du **Khi²** permet de vérifier l'existence d'une **relation statistique** entre deux variables qualitatives. Afin de vérifier la significativité de ce test, l'indicateur de la **p value** nous permet de déterminer à quel degré peut-on écarter l'hypothèse nulle, nommée H0, c'est à dire a quel degré dpeut-on affirmer qu'il existe une relation de dépendance entre les variables, et que cette relation ne dépendant pas du hasard.

\vspace{150pt} 

## 18)  Décrivez la relation entre x et y en vous appuyant sur le graphique. Quelle hypothèse pouvez vous formuler ? Comment modéliser cette relation et quelle fonction utiliser avec R? Que pouvez vous dire de l’individu entouré par un cercle sur le graphique ? (3pts) 

```{r, echo = FALSE}
n <- 150
x <- runif(n)
eps <- rnorm(n, 0, 0.04)
y <- x * 0.9 + eps
df <- data.frame(x,y)
df$x <- df$x * 100
df$y <- df$y * 100
df$x <- 100 - df$x
df[151, ] <- c(30,10)

plot(df$x, df$y, pch = 20, col = "darkblue", cex = .8,
     xlab = "x", ylab = "y")
points(x = 30, y = 10, pch = 1, col = "darkred", cex = 6)
text(x = 70, y = 80, labels = "R² = 0.97", cex = .8, col = "gray20")
```


**Réponse** : D'après ce **nuage de points**, la relation entre x et y semble **linéaire**, et a un sens **négatif**. Nous pouvons formuler l'hypothèse indiquant que **les variables sont liées**, et que **plus la valeur de x augmente, plus la valeur de y diminue.**

Pour modéliser cette relation, nous pouvons calculer/afficher la **droite de régression**. Pour cela, nous passons par la fonction **lm()** (pour linear model), fonction primitive de R. Parmi les éléments en sortie de notre fonction lm, on retrouve les valeurs de a et de b qui vont nous permettre d'écrire l'équation Y = a*x + b.

L'individu entouré sur le graphique s'éloigne beaucoup du modèle. Il s'agit d'un individu isolé dont la valeur réelle de y est éloignée de la valeur attendue pour une valeur x donnée. Dans ce cas de figure, la valeur de y est beaucoup plus faible qu'attendue (environ 10) pour une valeur de x égale à 30. La valeur attendue de y se trouve autour de 60

\vspace{150pt} 

